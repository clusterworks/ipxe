diff -Naur ipxe/src/include/ipxe/proxy.h ipxepatch/src/include/ipxe/proxy.h
--- ipxe/src/include/ipxe/proxy.h	1970-01-01 01:00:00.000000000 +0100
+++ ipxepatch/src/include/ipxe/proxy.h	2016-10-14 11:04:39.360506266 +0200
@@ -0,0 +1,17 @@
+#ifndef _IPXE_PROXY_H
+#define _IPXE_PROXY_H
+
+/** @file
+ *
+ * HTTP Proxy
+ *
+ */
+
+FILE_LICENCE ( GPL2_OR_LATER );
+
+int is_proxy_set ( );
+struct uri *get_proxy ( );
+const char *proxied_uri_host ( struct uri *uri );
+unsigned int proxied_uri_port ( struct uri *uri, unsigned int default_port );
+
+#endif /* _IPXE_PROXY_H */
diff -Naur ipxe/src/include/ipxe/settings.h ipxepatch/src/include/ipxe/settings.h
--- ipxe/src/include/ipxe/settings.h	2016-10-14 15:40:12.937589709 +0200
+++ ipxepatch/src/include/ipxe/settings.h	2016-10-14 11:07:00.201282542 +0200
@@ -465,6 +465,8 @@
 mac_setting __setting ( SETTING_NETDEV, mac );
 extern const struct setting
 busid_setting __setting ( SETTING_NETDEV, busid );
+extern struct setting
+http_proxy_setting __setting ( SETTING_MISC, ip );
 extern const struct setting
 user_class_setting __setting ( SETTING_HOST_EXTRA, user-class );
 extern const struct setting
